<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
     <script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
    <style type="text/css">
        body {
            background-repeat: no-repeat;
            text-align: center;
        }

        .btn {
            background-color: rgb(83, 123, 53);
            color: white;
            border: 0px;
            width: 500px;
			height: 80px;
            margin: 50px;
            font-size: 32px;
            border-radius: 30px;
            align-content: center;
            outline:none;
        }

        #loginPwd, #employeeId {
                width: 500px;
			    height: 80px;
			    margin: 20px;
			    font-size: 32px;
			    text-align: center;
			    outline:none;
        }

        form {
            width: 500px;
            height: 200px;
            align-content: center;
            text-align: center;
            display: inline;
        }

        h1{
            font-size: 50px;
            color: #343a40;
        }

        div{
            width:100%;
            text-align: center;
            margin-top: 260px;
        }
    </style>
    <script language="javascript">
        function SendForm() {
            if (NotNull()) {
                $.ajax({
                    url: '/TemperatureReporter/login/',//地址
                    dataType: 'json',//数据类型
                    type: 'Post',//类型
                    data: $('#form1').serialize(),
                    timeout: 20000,//超时
                    //请求成功
                    success: function (result) {
                        if (result.respCode == '1000') {
                            sessionStorage["teamId"] = result.teamId;
                            sessionStorage["teamName"] = result.teamName;
                            sessionStorage["employeeId"] = result.employeeId;
                            setCookie('sessionId',result.sessionId)
                            window.location.href='/TemperatureReporter/temperatureRecorderPage/';
                        }
                        else {
                            alert(result.respMsg)
                        }
                    },
                    //失败/超时
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        if (textStatus === 'timeout') {
                            alert('请求超時');
                            setTimeout(function () {
                                alert('重新请求');
                            }, 20000);
                        }
                        //alert(errorThrown);
                    }
                })
            }
        }
        function setCookie(name, value) {
            if (value) {
                var days = 1; //定义一天
                var exp = new Date();
                exp.setTime(exp.getTime() + days * 24 * 60 * 60 * 1000);
                document.cookie = name + "=" + value + ";expires=" + exp.toGMTString;
            }
        }
        function NotNull() {
            var userName = document.getElementById("employeeId");
            var password = document.getElementById("loginPwd");
            if (userName.value == "") {
                alert("员编不得为空！");
                return false;
            }
            if (password.value == "") {
                alert("密码不得为空！");
                return false;
            } else {
                return true;
            }
        }
    </script>
</head>
<body>
<div>
    <form id="form1" action="xx" method="post">
        <h1>健康信息统计</h1>
        <br/>
        <br/>
        <input id="employeeId" name="employeeId" placeholder="员编"/>
        <br/>
        <input id="loginPwd" name="loginPwd" type="password" placeholder="密码"/>
        <br/>
        <input class="btn" type="button" name="submit" value="登录" onclick="SendForm();"/>
    </form>
</div>
</body>
</html>
